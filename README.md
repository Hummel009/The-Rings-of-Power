The Rings of Power - простенький мод, который добавляет 20 колец власти в Minecraft. Кольца имеют эффекты на нахождение в инвентаре и клик ПКМ. Мод рассматривается как тематические дополнение к моду "Властелин колец", хотя мод независим и не требует установки каких-либо других модов.

Приведённая ниже документация будет полезна как разработчикам, так и мне самому из будущего. Сведения, гайды, подводные камни, советы и всё такое. Обязательно прочитайте, здесь есть уникальная информация, которой больше нигде нет.

<h2> Общая информация </h2>

> [!NOTE]
> У меня на компьютере в переменных средах указана JDK Eclipse Temurin 1.8.0_392. Если у вас в ходе установки что-то пошло не так, первым делом проверьте версию Java на комьютере. Вторым делом - проверьте версию Java в IDE, об этом будет раздел ниже.

* Каждая папка в репозитории (кроме forges) - это отдельный проект Gradle, который должен быть импортирован в Eclipse IDE или открыт через IntelliJ IDEA. Но есть нюансы.
* Версии 1.3.2 - 1.6.4 используют Voldeloom - аналог Forge, позволяющий вести разработку на устаревших версиях. Он другими методами делает то же, что и древний Forge, но с применением новейших технологий. 
  * Папки версий, как полноценные проекты Gradle, можно просто импортировать в Eclipse IDE или открыть через IntelliJ IDEA, чтобы Gradle сам запустил установку среды.
  * Чтобы запустить мод из среды, выполните Gradle Task `runClient`, либо откройте консоль Windows в папке среды и введите `gradlew runClient`.
    * После первого запуска может открыться чистый Minecraft без вашего мода, это норма. В следующие разы всё будет нормально.
  * Чтобы скомпилировать мод, выполните Gradle Task `build`, либо откройте консоль Windows в папке среды и введите `gradlew build`.
    * Это делать необязательно, если вы только что запускали `runClient`. Эта команда тоже компилирует мод.
  * Готовый мод лежит в папке `среда_разработки/build/libs`. Там лежит два файла, вас интересует тот, который без приписки `-dev`.
* Версия 1.7.10 на момент 2023 года доступна в двух вариантах, древний Forge и Voldeloom. Второй вариант ничем не отличается от пункта выше, а вот первый вариант (который использовал я) имеет отличия.
  * Версия старая, как и ForgeGradle, так что придётся заниматься костылями. Костыли реализуются созданием файлов IDE.
    * В папке есть два батника, `setupEclipse` и `setupIdea`. Выбираем нужный, запускаем, ждём окончания.
      * Под капотом батников лежат команды консоли Windows `gradlew setupDecompWorkspace eclipse` и `gradlew setupDecompWorkspace idea` соответственно. Если желаете взять процесс в свои руки и не полагаться на батники, можете вместо их запуска прописывать эти команды в консоли Windows и эффект будет тот же. Смысл батника, скорее, не в экономии времени, а в напоминании о том, что эта версия требует костыль.
    * После окончания генерации среды мы импортируем сгенерированный проект IDE. ***Именно проект IDE!*** Это не проект Gradle.
      * В случае Eclipse IDE мы импортируем всю папку как "существующий Eclipse-проект".
      * В случае IntelliJ IDEA мы открываем файл `.ipr`. Загрузку скриптов Gradle нужно пропустить. Когда инициализация закончится, крайне рекомендуется в меню `File -> Manage IDE Settings` конвертировать проект `.ipr` в Directory-based format, иначе багов и зависаний не миновать.
	* Существуют фокусы с открытием файла проекта Eclipse (`.project`) через IntelliJ IDEA, тогда ещё нужно добавить модуль видимости. Работать будет, но зачем всё это?
  * Чтобы запустить мод из среды, используйте следующий подход.
    * В случае IntelliJ IDEA у нас уже сгенерированы сверху два варианта запуска, клиент и сервер. Сервер не работает, это норма.
    * В случае Eclipse IDE мы должны самостоятельно создать новую конфигурацию запуска. Это делается возле зелёного кружочка запуска - там есть чёрный треугольник, при нажатии на который можно увидеть Run Configurations. Нажимаем, затем выбираем слева Java Application и жмём сверху слева на белый документ. Появляется ненастроенный запуск. Настраиваем его.
      * В первой вкладке указываем проект - это папка, для которой мы создаём запуски.
      * В первой вкладке указываем файл входа - это `GradleStart`.
      * Во вкладке Arguments нужно сверху выделить память: `-Xincgc -Xmx2G -Xms2G`.
      * Во вкладке Arguments нужно снизу указать рабочую папку. Например, создайте в скачанном репозитории папку run и укажите её, как рабочую.
      * Сохраняем.
  * Чтобы скомпилировать мод, используйте следующий подход.
    * В случае Eclipse IDE откройте консоль Windows в папке среды и введите `gradlew build`.
    * В случае IntelliJ IDEA создайте собственный Gradle Task с командой `build` на вашем проекте и выполните его, либо откройте консоль Windows в папке среды и введите `gradlew build`.
  * Готовый мод лежит в папке `среда_разработки/build/libs`.
* Версии 1.8.9 - 1.11.2 ничем не отличаются от сценария древнего Forge в 1.7.10.
* Версии 1.12.2 - 1.20.1 - это современный Forge, так что установка и работа со средой похожи на Voldeloom.
  * Папки версий, как полноценные проекты Gradle, можно просто импортировать в Eclipse IDE или открыть через IntelliJ IDEA, чтобы Gradle сам запустил установку среды.
  * Чтобы запустить мод из среды, нужно сгенерировать запуски.
    * В случае Eclipse IDE выполните Gradle Task `genEclipseRuns`, либо откройте консоль Windows в папке среды и введите `gradlew genEclipseRuns`.
    * В случае IntelliJ IDEA Выполните Gradle Task `genIntellijRuns`, либо откройте консоль Windows в папке среды и введите `gradlew genIntellijRuns`.
  * Чтобы скомпилировать мод, выполните Gradle Task `build`, либо откройте консоль Windows в папке среды и введите `gradlew build`.
  * Готовый мод лежит в папке `среда_разработки/build/libs`.
  
Несколько примечаний:

* Eclipse иногда, ввиду плохого интернета, может повредить скачиваемый файл и настройка среды сорвётся. И потом никогда не починится. Придётся всё сделать через IntelliJ IDEA, а уже потом импортировать среду в Eclipse.
* Очевидно, что если на древних версиях Forge мы запускали костыльную генерацию файлов среды, то на этих версиях нет никаких Gradle tasks. Так что всё делается через консоль в папке среды. В случае IntelliJ IDEA возможно создание Gradle tasks вручную.
* Версия 1.12.2 может не запускаться или не иметь текстур в IntelliJ IDEA, но в Eclipse всё будет нормально.

<h2> Сведения об используемых JDK/SDK и Compiler Compliance Level/Language Level </h2>

У Minecraft, Forge, ForgeGradle, Voldeloom и Gradle есть свои требования к установленной версии Java и допуску её синтаксиса (с годами в язык добавляют новые конструкции, для которых ещё нет поддержки у вышеуказанных технологий). Таким образом, ваша IDE должна быть настроена следующим образом:

* Версии 1.3.2 - 1.6.4 используют Java 11 + допуск синтаксиса 6.
* Версия 1.7.10 доступна в двух вариантах.
  * Версия на Forge использует Java 8 + допуск синтаксиса 8.
  * Версия на Voldeloom использует Java 11 + допуск синтаксиса 8.
* Версии 1.8.9 - 1.16.5 используют Java 8 + допуск синтаксиса 8.
* Версия 1.17.1 использует Java 16 + допуск синтаксиса 16.
* Версии 1.18.2 - 1.20.1 используют Java 17 + допуск синтаксиса 17.

Обязательно проконтролируйте, чтобы в вашей IDE после установки были именно такие значения, а если они другие - измените их. Ваш мод может попросту не запуститься и не скомпилироваться, если вы этого не сделаете.

Java в Eclipse называется JRE/JDK, в IntelliJ IDEA - SDK. Допуск синтаксиса в Eclipse называется Compiler Compliance Level, в IntelliJ IDEA - Language Level.
  
<h2> Сведения об используемых ForgeGradle/Voldeloom и Gradle </h2>

Всем известно, что старые среды разработки Minecraft медленно умирают из-за удаления их зависимостей из Интернета. А другие зачастую используют устаревший Gradle и ForgeGradle, которые можно было бы и обновить. В целом, чем меньше версий Gradle придётся скачать, тем лучше. Поэтому я отредактировал/пропатчил все среды разработки, и они отличаются от доступных для скачивания в интернете. 

* Версии 1.3.2 - 1.6.4 используют Voldeloom 2.4 + Gradle 7.6.
* Версия 1.7.10 доступна в двух вариантах.
  * Версия на Forge использует Anatawa12's ForgeGradle:1.2 + Gradle 8.1.1
  * Версия на Voldeloom использует Voldeloom 2.4 + Gradle 8.1.1
* Версия 1.8.9 использует ForgeGradle 2.1-SNAPSHOT + Gradle 2.14
* Версии 1.9.4 - 1.11.2 используют ForgeGradle 2.2-SNAPSHOT + Gradle 2.14
* Версии 1.12.2 - 1.20.1 используют ForgeGradle 6.0-6.2 + Gradle 8.1.1

Эти же комбинации сборочных машин лежат по архивам в папке forges. Вы можете использовать их вместо скачивания официальных Forge Src/Mdk на их сайте.

Примечание: уже после запуска версий 1.3.2 - 1.6.4 можно заменить Gradle в них на 8.1.1, и всё будет работать. Но первый запуск должен быть именно на 7.6, иначе не скачаются нужные файлы toolchain.

<h2> Будущее мода (или прошлое?) </h2>

Меня всегда привлекала идея выпустить мод для каждой основной версии Minecraft. Поэтому мод будет поддерживаться на всех версиях как можно дольше.

Мод уже существует на всех версиях от 1.3.2 до 1.20.1 включительно. Огромная благодарность [этому проекту и его автору](https://github.com/CrackedPolishedBlackstoneBricksMC/voldeloom)! Он сделал все, чтобы устаревшие среды разработки заработали в 2023 году. Только благодаря его проекту я смог создать свой мод для версий 1.3.2, 1.4.7, 1.5.2 и 1.6.4.

Недавно я открыл для себя такую программу, как RetroMCP, которая позволяет создавать моды на любую версию от Minecraft Alpha до 1.2.5. Однако это не Forge, это просто редактирование игры, как в старые добрые времена. Времена, когда моды были частенько несовместимы друг с другом, из-за чего и был придуман ModLoader и Forge. В общем, у меня пока нет намерения выпустить мод на эти версии.
